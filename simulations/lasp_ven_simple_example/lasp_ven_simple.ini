[General]
cmdenv-output-file = log.txt
cmdenv-express-mode = false
cmdenv-autoflush = true
cmdenv-status-frequency = 1s

# Network configuration
network = LaspVenSimpleSimulation
sim-time-limit = 200s

# Random number generators
num-rngs = 3
seed-set = ${repetition}

# Simulation control
debug-on-errors = false
print-undisposed = false

**.scalar-recording = true
**.vector-recording = true

#############################################################################
# World & Mobility Configuration
#############################################################################

# Playground configuration
*.playgroundSizeX = 200m
*.playgroundSizeY = 200m
*.playgroundSizeZ = 50m

# Visualization configuration (simplified)
*.visualizer.dataLinkVisualizer.packetFilter = "*"
*.visualizer.networkRouteVisualizer.packetFilter = "*"
*.visualizer.*.animationSpeed = 1
*.visualizer.dataLinkVisualizer.fadeOutTime = 3s

# Veins integration
*.veinsManager.updateInterval = 0.1s
*.veinsManager.host = "localhost"
*.veinsManager.port = 9999
*.veinsManager.autoShutdown = true
*.veinsManager.launchConfig = xmldoc("launchd.xml")
*.veinsManager.moduleType = "lasp_ven.veins_inet.VeinsInetCar"
*.veinsManager.moduleName = "vehicle"
*.veinsManager.moduleDisplayString = ""

#############################################################################
# Network Layer Configuration  
#############################################################################

# IPv4 configuration
*.configurator.typename = "HostAutoConfigurator"
*.configurator.interfaces = "wlan0"
*.configurator.mcastGroups = "224.0.0.1"

# Explicit IP address assignments
*.laspManager.wlan.ipv4.address = "192.168.1.100"
*.laspManager.wlan.ipv4.netmask = "255.255.255.0"
*.edgeServer[0].wlan.ipv4.address = "192.168.1.200"
*.edgeServer[0].wlan.ipv4.netmask = "255.255.255.0"
*.edgeServer[1].wlan.ipv4.address = "192.168.1.201"
*.edgeServer[1].wlan.ipv4.netmask = "255.255.255.0"
*.edgeServer[2].wlan.ipv4.address = "192.168.1.202"
*.edgeServer[2].wlan.ipv4.netmask = "255.255.255.0"

#############################################################################
# Physical Layer Configuration
#############################################################################

# Radio medium
*.radioMedium.typename = "Ieee80211ScalarRadioMedium"
*.radioMedium.backgroundNoise.power = -110dBm
*.radioMedium.mediumLimitCache.carrierFrequency = 5.890e9Hz

# IEEE 802.11p configuration for vehicles
*.vehicle[*].wlan.typename = "Ieee80211Interface"
*.vehicle[*].wlan.radio.typename = "Ieee80211ScalarRadio"
*.vehicle[*].wlan.radio.carrierFrequency = 5.890e9Hz
*.vehicle[*].wlan.radio.bandwidth = 10MHz
*.vehicle[*].wlan.radio.transmitter.power = 20mW
*.vehicle[*].wlan.radio.transmitter.preambleDuration = 20us
*.vehicle[*].wlan.radio.transmitter.headerLength = 23B
*.vehicle[*].wlan.radio.receiver.sensitivity = -85dBm
*.vehicle[*].wlan.radio.receiver.energyDetection = -85dBm
*.vehicle[*].wlan.radio.receiver.snirThreshold = 4dB
*.vehicle[*].wlan.mac.typename = "Ieee80211Mac"
*.vehicle[*].wlan.mac.qosStation = false

# LASP Manager network configuration
*.laspManager.wlan.typename = "Ieee80211Interface"
*.laspManager.wlan.radio.typename = "Ieee80211ScalarRadio"
*.laspManager.wlan.radio.carrierFrequency = 5.890e9Hz
*.laspManager.wlan.radio.transmitter.power = 100mW
*.laspManager.wlan.radio.transmitter.headerLength = 23B
*.laspManager.wlan.radio.receiver.sensitivity = -85dBm
*.laspManager.wlan.radio.receiver.energyDetection = -85dBm
*.laspManager.wlan.radio.receiver.snirThreshold = 4dB
*.laspManager.wlan.mac.typename = "Ieee80211Mac"

# Application lifecycle configuration
*.laspManager.app[*].startTime = 0s
*.edgeServer[*].app[*].startTime = 0s

# Ensure applications are started by lifecycle manager
*.laspManager.app[*].typename = "lasp_ven.lasp_ven_simple.LASPManager"
*.edgeServer[*].app[*].typename = "lasp_ven.lasp_ven_simple.EdgeServerApp"

# Lifecycle management
*.laspManager.app[*].startTime = 0s
*.edgeServer[*].app[*].startTime = 0s

# Ensure applications are started
*.laspManager.app[*].typename = "lasp_ven.lasp_ven_simple.LASPManager"
*.edgeServer[*].app[*].typename = "lasp_ven.lasp_ven_simple.EdgeServerApp"



# Edge Server network configuration
*.edgeServer[*].wlan.typename = "Ieee80211Interface"
*.edgeServer[*].wlan.radio.typename = "Ieee80211ScalarRadio"
*.edgeServer[*].wlan.radio.carrierFrequency = 5.890e9Hz
*.edgeServer[*].wlan.radio.transmitter.power = 100mW
*.edgeServer[*].wlan.radio.transmitter.headerLength = 23B
*.edgeServer[*].wlan.radio.receiver.sensitivity = -85dBm
*.edgeServer[*].wlan.radio.receiver.energyDetection = -85dBm
*.edgeServer[*].wlan.radio.receiver.snirThreshold = 4dB
*.edgeServer[*].wlan.mac.typename = "Ieee80211Mac"

#############################################################################
# Application Layer Configuration
#############################################################################

# LASP Manager configuration
*.laspManager.numApps = 1
*.laspManager.app[0].typename = "lasp_ven.lasp_ven_simple.LASPManager"
*.laspManager.app[0].strategy = ${strategy="greedy","threshold"}
*.laspManager.app[0].loadThreshold = 0.8
*.laspManager.app[0].evaluationInterval = 2s
*.laspManager.app[0].numEdgeServers = ${servers=3,5,8}
*.laspManager.app[0].localPort = 15000

# Network configuration - connect to LASPManager parameter
*.numEdgeServers = ${servers}



# Vehicle application configuration
*.vehicle[*].numApps = 1
*.vehicle[*].app[0].typename = "lasp_ven.lasp_ven_simple.VehicleServiceApp"
*.vehicle[*].app[0].serviceRequestInterval = 15s
*.vehicle[*].app[0].maxRequests = 3
*.vehicle[*].app[0].requestSize = 200B

# Vehicle mobility configuration (managed by VeinsInetManager)
*.vehicle[*].mobility.typename = "lasp_ven.veins_inet.VeinsInetMobility"

# Vehicle IP configuration (auto-assigned in 192.168.1.10+ range)
*.vehicle[*].wlan.ipv4.netmask = "255.255.255.0"

# Mobility configuration for fixed infrastructure
*.laspManager.mobility.typename = "StationaryMobility"
*.laspManager.mobility.initialX = 100m  # Central position in road network
*.laspManager.mobility.initialY = 100m  # Central to the square
*.laspManager.mobility.initialZ = 20m   # Elevated for better coverage



# Edge Server positioning
*.edgeServer[*].mobility.typename = "StationaryMobility"

# Position edge servers strategically
# 3 servers: Surrounding the 100m x 100m road network
*.edgeServer[0].mobility.initialX = 120m
*.edgeServer[0].mobility.initialY = 50m
*.edgeServer[0].mobility.initialZ = 15m
*.edgeServer[1].mobility.initialX = 50m
*.edgeServer[1].mobility.initialY = 120m
*.edgeServer[1].mobility.initialZ = 15m
*.edgeServer[2].mobility.initialX = 120m
*.edgeServer[2].mobility.initialY = 120m
*.edgeServer[2].mobility.initialZ = 15m

# 5 servers: Extended coverage around the square
*.edgeServer[3].mobility.initialX = 50m
*.edgeServer[3].mobility.initialY = 50m
*.edgeServer[3].mobility.initialZ = 15m
*.edgeServer[4].mobility.initialX = 120m
*.edgeServer[4].mobility.initialY = 50m
*.edgeServer[4].mobility.initialZ = 15m

# 8 servers: Complete surrounding coverage
*.edgeServer[5].mobility.initialX = 50m
*.edgeServer[5].mobility.initialY = 120m
*.edgeServer[5].mobility.initialZ = 15m
*.edgeServer[6].mobility.initialX = 120m
*.edgeServer[6].mobility.initialY = 120m
*.edgeServer[6].mobility.initialZ = 15m
*.edgeServer[7].mobility.initialX = 85m
*.edgeServer[7].mobility.initialY = 85m
*.edgeServer[7].mobility.initialZ = 15m

# Edge Server application configuration
*.edgeServer[0].app[0].serverId = 0
*.edgeServer[1].app[0].serverId = 1
*.edgeServer[2].app[0].serverId = 2
*.edgeServer[3].app[0].serverId = 3
*.edgeServer[4].app[0].serverId = 4
*.edgeServer[5].app[0].serverId = 5
*.edgeServer[6].app[0].serverId = 6
*.edgeServer[7].app[0].serverId = 7
*.edgeServer[*].app[0].computeCapacity = 100GFLOPS
*.edgeServer[*].app[0].storageCapacity = 1000GB

#############################################################################
# Statistics and Output Configuration
#############################################################################

# Result recording
**.requestsReceived.result-recording-modes = +count,+sum,+vector
**.requestsServed.result-recording-modes = +count,+sum,+vector
**.averageLatency.result-recording-modes = +mean,+max,+min,+vector
**.serverUtilization.result-recording-modes = +mean,+max,+vector
**.requestsSent.result-recording-modes = +count,+sum,+vector
**.responsesReceived.result-recording-modes = +count,+sum,+vector

# Warmup period
warmup-period = 30s

# Output files - safe naming without special characters
output-vector-file = results/lasp_ven_simple-${repetition}.vec
output-scalar-file = results/lasp_ven_simple-${repetition}.sca


#############################################################################
# Experimental Configuration
#############################################################################

# Base configuration for all experiments
[Config Baseline]
description = "Baseline LASP VEN simulation with 3 edge servers"

# Strategy comparison experiments
[Config ThresholdStrategy]
description = "Threshold-based service placement strategy"
extends = Baseline
*.laspManager.app[0].strategy = "threshold"

[Config GreedyStrategy]
description = "Greedy-based service placement strategy"
extends = Baseline
*.laspManager.app[0].strategy = "greedy"

# Edge server scalability experiments
[Config ThreeServers]
description = "3 edge servers configuration"
extends = Baseline
*.numEdgeServers = 3

[Config FiveServers]
description = "5 edge servers configuration"
extends = Baseline
*.numEdgeServers = 5

[Config EightServers]
description = "8 edge servers configuration"
extends = Baseline
*.numEdgeServers = 8

# Traffic load experiments
[Config LightTraffic]
description = "Light traffic - infrequent, small requests"
extends = Baseline
*.vehicle[*].app[0].serviceRequestInterval = 30s
*.vehicle[*].app[0].maxRequests = 2
*.vehicle[*].app[0].requestSize = 100B

[Config MediumTraffic]
description = "Medium traffic - moderate requests"
extends = Baseline
*.vehicle[*].app[0].serviceRequestInterval = 10s
*.vehicle[*].app[0].maxRequests = 5
*.vehicle[*].app[0].requestSize = 500B

[Config HeavyTraffic]
description = "Heavy traffic - frequent, large requests"
extends = Baseline
*.vehicle[*].app[0].serviceRequestInterval = 5s
*.vehicle[*].app[0].maxRequests = 10
*.vehicle[*].app[0].requestSize = 1000B

# Vehicle density experiments (requires manual route file editing)
[Config LowDensity]
description = "Low vehicle density - edit straight.rou.xml period=15"
extends = Baseline

[Config HighDensity]
description = "High vehicle density - edit straight.rou.xml period=2"
extends = Baseline 