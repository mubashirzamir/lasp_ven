[General]
cmdenv-output-file = log.txt
cmdenv-express-mode = false
cmdenv-autoflush = true
cmdenv-status-frequency = 1s

# Network configuration
network = LaspVenSimpleSimulation
sim-time-limit = 200s

# Random number generators
num-rngs = 3
seed-set = ${repetition}

# Simulation control
debug-on-errors = false
print-undisposed = false

**.scalar-recording = true
**.vector-recording = true

#############################################################################
# World & Mobility Configuration
#############################################################################

# Playground configuration - match SUMO road network size
*.playgroundSizeX = 100m
*.playgroundSizeY = 100m
*.playgroundSizeZ = 50m

# Visualization configuration - comprehensive settings for proper road network display
*.visualizer.dataLinkVisualizer.packetFilter = "*"
*.visualizer.networkRouteVisualizer.packetFilter = "*"
*.visualizer.*.animationSpeed = 1
*.visualizer.dataLinkVisualizer.fadeOutTime = 3s

# Physical layer visualization
*.visualizer.physicalLinkVisualizer.displayLinks = true
*.visualizer.physicalLinkVisualizer.linkColor = "red"
*.visualizer.physicalLinkVisualizer.linkWidth = 2

# Radio visualization
*.visualizer.radioVisualizer.displayRadios = true
*.visualizer.radioVisualizer.radioColor = "blue"
*.visualizer.radioVisualizer.radioRadius = 10

# Network route visualization
*.visualizer.networkRouteVisualizer.displayRoutes = true
*.visualizer.networkRouteVisualizer.routeColor = "green"
*.visualizer.networkRouteVisualizer.routeWidth = 1

# Data link visualization
*.visualizer.dataLinkVisualizer.displayLinks = true
*.visualizer.dataLinkVisualizer.linkColor = "orange"
*.visualizer.dataLinkVisualizer.linkWidth = 1

# Mobility visualization
*.visualizer.mobilityVisualizer.displayMobility = true
*.visualizer.mobilityVisualizer.mobilityColor = "purple"

# Physical environment visualization
*.visualizer.physicalEnvironmentVisualizer.displayObjects = true
*.visualizer.physicalEnvironmentVisualizer.objectColor = "brown"

# Veins-specific road visualization
*.visualizer.roadsCanvasVisualizer.displayRoads = true
*.visualizer.roadsCanvasVisualizer.roadColor = "grey"
*.visualizer.roadsCanvasVisualizer.roadWidth = 2
*.visualizer.roadsCanvasVisualizer.displayJunctions = true
*.visualizer.roadsCanvasVisualizer.junctionColor = "black"
*.visualizer.roadsCanvasVisualizer.displayLanes = true
*.visualizer.roadsCanvasVisualizer.laneColor = "white"
*.visualizer.roadsCanvasVisualizer.laneWidth = 1

# OSG visualization for 3D road display
*.visualizer.roadsOsgVisualizer.displayRoads = true
*.visualizer.roadsOsgVisualizer.roadColor = "grey"
*.visualizer.roadsOsgVisualizer.roadWidth = 2
*.visualizer.roadsOsgVisualizer.displayJunctions = true
*.visualizer.roadsOsgVisualizer.junctionColor = "black"
*.visualizer.roadsOsgVisualizer.displayLanes = true
*.visualizer.roadsOsgVisualizer.laneColor = "white"
*.visualizer.roadsOsgVisualizer.laneWidth = 1

# Enable OSG visualization
*.useOsg = true

# Additional visualization settings for proper road network display
*.visualizer.roadsCanvasVisualizer.displayRoads = true
*.visualizer.roadsCanvasVisualizer.roadColor = "grey"
*.visualizer.roadsCanvasVisualizer.roadWidth = 3
*.visualizer.roadsCanvasVisualizer.displayJunctions = true
*.visualizer.roadsCanvasVisualizer.junctionColor = "black"
*.visualizer.roadsCanvasVisualizer.displayLanes = true
*.visualizer.roadsCanvasVisualizer.laneColor = "white"
*.visualizer.roadsCanvasVisualizer.laneWidth = 1

# Ensure proper coordinate system alignment
*.visualizer.roadsCanvasVisualizer.coordinateSystem = "sumo"
*.visualizer.roadsOsgVisualizer.coordinateSystem = "sumo"

# Veins integration
*.veinsManager.updateInterval = 0.1s
*.veinsManager.host = "localhost"
*.veinsManager.port = 9999
*.veinsManager.autoShutdown = true
*.veinsManager.launchConfig = xmldoc("launchd.xml")
*.veinsManager.moduleType = "lasp_ven.veins_inet.VeinsInetCar"
*.veinsManager.moduleName = "vehicle"
*.veinsManager.moduleDisplayString = ""

# Veins-specific positioning and visualization
*.veinsManager.veinsInetMobility.x = 0
*.veinsManager.veinsInetMobility.y = 0
*.veinsManager.veinsInetMobility.z = 0
*.veinsManager.veinsInetMobility.setHostSpeed = false

#############################################################################
# Network Layer Configuration  
#############################################################################

# Ipv4NetworkConfigurator configuration
*.configurator.config = xmldoc("network.xml")

# Vehicle IP assignment handled programmatically in VehicleServiceApp

# Routing configuration - all nodes are on the same subnet
*.laspManager.ipv4.routingTable.routingFile = ""
*.laspManager.ipv4.routingTable.rip.ripEnabled = false
*.edgeServer[*].ipv4.routingTable.routingFile = ""
*.edgeServer[*].ipv4.routingTable.rip.ripEnabled = false
*.vehicle[*].ipv4.routingTable.routingFile = ""
*.vehicle[*].ipv4.routingTable.rip.ripEnabled = false

# Disable automatic routing to prevent conflicts
*.laspManager.ipv4.configurator.addStaticRoutes = false
*.laspManager.ipv4.configurator.addDefaultRoutes = false
*.edgeServer[*].ipv4.configurator.addStaticRoutes = false
*.edgeServer[*].ipv4.configurator.addDefaultRoutes = false
*.vehicle[*].ipv4.configurator.addStaticRoutes = false
*.vehicle[*].ipv4.configurator.addDefaultRoutes = false

# Network interface configuration - ensure all nodes can communicate
*.laspManager.wlan[0].ipv4.broadcast = "192.168.1.255"
*.edgeServer[*].wlan[0].ipv4.broadcast = "192.168.1.255"
*.vehicle[*].wlan[0].ipv4.broadcast = "192.168.1.255"

#############################################################################
# Physical Layer Configuration
#############################################################################

# Radio medium - use UnitDiskRadioMedium for ad-hoc communication
*.radioMedium.typename = "UnitDiskRadioMedium"

# Vehicle network configuration - ad-hoc communication
*.vehicle[*].wlan[0].typename = "AckingWirelessInterface"
*.vehicle[*].wlan[0].bitrate = 2Mbps
*.vehicle[*].wlan[0].mac.typename = "CsmaCaMac"
*.vehicle[*].wlan[0].mac.useAck = false
*.vehicle[*].wlan[0].radio.typename = "UnitDiskRadio"
*.vehicle[*].wlan[0].radio.transmitter.communicationRange = 500m
*.vehicle[*].wlan[0].radio.receiver.ignoreInterference = true
*.vehicle[*].wlan[0].ipv4.netmask = "255.255.255.0"

# LASP Manager network configuration - ad-hoc communication
*.laspManager.numWlanInterfaces = 1
*.laspManager.wlan[0].typename = "AckingWirelessInterface"
*.laspManager.wlan[0].bitrate = 2Mbps
*.laspManager.wlan[0].mac.typename = "CsmaCaMac"
*.laspManager.wlan[0].mac.useAck = false
*.laspManager.wlan[0].radio.typename = "UnitDiskRadio"
*.laspManager.wlan[0].radio.transmitter.communicationRange = 500m
*.laspManager.wlan[0].radio.receiver.ignoreInterference = true
*.laspManager.wlan[0].ipv4.netmask = "255.255.255.0"

# Edge Server network configuration - ad-hoc communication
*.edgeServer[*].numWlanInterfaces = 1
*.edgeServer[*].wlan[0].typename = "AckingWirelessInterface"
*.edgeServer[*].wlan[0].bitrate = 2Mbps
*.edgeServer[*].wlan[0].mac.typename = "CsmaCaMac"
*.edgeServer[*].wlan[0].mac.useAck = false
*.edgeServer[*].wlan[0].radio.typename = "UnitDiskRadio"
*.edgeServer[*].wlan[0].radio.transmitter.communicationRange = 500m
*.edgeServer[*].wlan[0].radio.receiver.ignoreInterference = true
*.edgeServer[*].wlan[0].ipv4.netmask = "255.255.255.0"

#############################################################################
# Application Layer Configuration
#############################################################################

# LASP Manager configuration
*.laspManager.numApps = 1
*.laspManager.app[0].typename = "lasp_ven.lasp_ven_simple.LASPManager"
*.laspManager.app[0].strategy = ${strategy="greedy","threshold"}
*.laspManager.app[0].loadThreshold = 0.8
*.laspManager.app[0].evaluationInterval = 2s
*.laspManager.app[0].numEdgeServers = 4
*.laspManager.app[0].localPort = 15000
*.laspManager.app[0].startTime = 0s

# Network configuration - fixed to exactly 4 edge servers
*.numEdgeServers = 4

# Edge Server application configuration
*.edgeServer[*].numApps = 1
*.edgeServer[*].app[0].typename = "lasp_ven.lasp_ven_simple.EdgeServerApp"
*.edgeServer[*].app[0].startTime = 0s
# Each edge server gets a unique port - exactly 4 servers
*.edgeServer[0].app[0].localPort = 8000
*.edgeServer[1].app[0].localPort = 8001
*.edgeServer[2].app[0].localPort = 8002
*.edgeServer[3].app[0].localPort = 8003
*.edgeServer[0].app[0].serverId = 0
*.edgeServer[1].app[0].serverId = 1
*.edgeServer[2].app[0].serverId = 2
*.edgeServer[3].app[0].serverId = 3
*.edgeServer[*].app[0].computeCapacity = 100GFLOPS
*.edgeServer[*].app[0].storageCapacity = 1000GB

# Vehicle application configuration
*.vehicle[*].numApps = 1
*.vehicle[*].app[0].typename = "lasp_ven.lasp_ven_simple.VehicleServiceApp"
*.vehicle[*].app[0].serviceRequestInterval = 15s
*.vehicle[*].app[0].maxRequests = 3
*.vehicle[*].app[0].requestSize = 200B

#############################################################################
# Mobility Configuration
#############################################################################

# Vehicle mobility configuration (managed by VeinsInetManager)
*.vehicle[*].mobility.typename = "lasp_ven.veins_inet.VeinsInetMobility"

# Mobility configuration for fixed infrastructure
*.laspManager.mobility.typename = "StationaryMobility"
*.laspManager.mobility.initFromDisplayString = false
*.laspManager.mobility.initialX = 50m  # Center of the 100m x 100m square road network
*.laspManager.mobility.initialY = 50m  # Center of the square
*.laspManager.mobility.initialZ = 20m   # Elevated for better coverage



# Edge Server positioning - exactly 4 servers at corners of square road network
*.edgeServer[*].mobility.typename = "StationaryMobility"
*.edgeServer[*].mobility.initFromDisplayString = false

# Individual edge server positioning for symmetric layout
# Bottom-left corner (10,10) - small offset to avoid edge issues
*.edgeServer[0].mobility.initialX = 10m
*.edgeServer[0].mobility.initialY = 10m
*.edgeServer[0].mobility.initialZ = 15m

# Bottom-right corner (90,10)
*.edgeServer[1].mobility.initialX = 90m
*.edgeServer[1].mobility.initialY = 10m
*.edgeServer[1].mobility.initialZ = 15m

# Top-right corner (90,90)
*.edgeServer[2].mobility.initialX = 90m
*.edgeServer[2].mobility.initialY = 90m
*.edgeServer[2].mobility.initialZ = 15m

# Top-left corner (10,90)
*.edgeServer[3].mobility.initialX = 10m
*.edgeServer[3].mobility.initialY = 90m
*.edgeServer[3].mobility.initialZ = 15m



#############################################################################
# Statistics and Output Configuration
#############################################################################

# Result recording
**.requestsReceived.result-recording-modes = +count,+sum,+vector
**.requestsServed.result-recording-modes = +count,+sum,+vector
**.averageLatency.result-recording-modes = +mean,+max,+min,+vector
**.serverUtilization.result-recording-modes = +mean,+max,+vector
**.requestsSent.result-recording-modes = +count,+sum,+vector
**.responsesReceived.result-recording-modes = +count,+sum,+vector

# Warmup period
warmup-period = 30s

# Output files - safe naming without special characters
output-vector-file = results/lasp_ven_simple-${repetition}.vec
output-scalar-file = results/lasp_ven_simple-${repetition}.sca

#############################################################################
# Experimental Configuration
#############################################################################

# Base configuration for all experiments
[Config Baseline]
description = "Baseline LASP VEN simulation with 4 edge servers"

# Strategy comparison experiments
[Config ThresholdStrategy]
description = "Threshold-based service placement strategy"
extends = Baseline
*.laspManager.app[0].strategy = "threshold"

[Config GreedyStrategy]
description = "Greedy-based service placement strategy"
extends = Baseline
*.laspManager.app[0].strategy = "greedy"

# Edge server configuration - fixed to exactly 4 servers
[Config FourServers]
description = "4 edge servers configuration (fixed symmetric layout)"
extends = Baseline
*.numEdgeServers = 4

# Traffic load experiments
[Config LightTraffic]
description = "Light traffic - infrequent, small requests"
extends = Baseline
*.vehicle[*].app[0].serviceRequestInterval = 30s
*.vehicle[*].app[0].maxRequests = 2
*.vehicle[*].app[0].requestSize = 100B

[Config MediumTraffic]
description = "Medium traffic - moderate requests"
extends = Baseline
*.vehicle[*].app[0].serviceRequestInterval = 10s
*.vehicle[*].app[0].maxRequests = 5
*.vehicle[*].app[0].requestSize = 500B

[Config HeavyTraffic]
description = "Heavy traffic - frequent, large requests"
extends = Baseline
*.vehicle[*].app[0].serviceRequestInterval = 5s
*.vehicle[*].app[0].maxRequests = 10
*.vehicle[*].app[0].requestSize = 1000B

# Vehicle density experiments (requires manual route file editing)
[Config LowDensity]
description = "Low vehicle density - edit straight.rou.xml period=15"
extends = Baseline

[Config HighDensity]
description = "High vehicle density - edit straight.rou.xml period=2"
extends = Baseline 

# Configure all nodes for ad-hoc V2V/V2I communication
# (AckingWirelessInterface with CsmaCaMac provides ad-hoc communication by default) 
